<!DOCTYPE html>
<html>
<head>
    <title>CO2 Emissions by City</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>CO₂ Emissions Tracker by City</h1>

    <form method="POST">
        <button type="submit" name="reset" value="1">Reset All Emissions</button>
    </form>

    <form method="POST">
        City:
        <select name="city" required>
            <option value="" disabled selected>Select a city</option>
            <option>Austin</option>
            <option>Dallas</option>
            <option>Houston</option>
            <option>San Antonio</option>
            <option>El Paso</option>
            <option>Fort Worth</option>
            <option>Arlington</option>
            <option>Corpus Christi</option>
            <option>Plano</option>
            <option>Laredo</option>
            <option>Garland</option>
            <option>Irving</option>
            <option>Amarillo</option>
            <option>Grand Prairie</option>
            <option>McKinney</option>
            <option>Frisco</option>
            <option>Brownsville</option>
            <option>Pasadena</option>
            <option>Mesquite</option>
            <option>Killeen</option>
        </select>
        Distance (km): <input type="number" step="0.1" name="distance" required>
        
        Vehicle:
        <select name="vehicle">
            <option>Gasoline</option>
            <option>Diesel</option>
            <option>Hybrid</option>
            <option>Electric</option>
        </select>
        <button type="submit">Add Trip</button>
    </form>

    <canvas id="emissionChart" width="900" height="400"></canvas>

    <script>
        const labels = {{ labels|tojson }};
        const data = {{ values|tojson }};
        const ctx = document.getElementById('emissionChart').getContext('2d');

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'CO₂ Emission (kg)',
                    data: data,
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                plugins: { 
                    tooltip: { enabled: true },
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        suggestedMax: Math.max(...data) + 500,
                        title: { display: true, text: 'CO₂ Emission (kg)' }
                    },
                    x: { title: { display: true, text: 'City' } }
                }
            }
        });
    </script>
</body>
</html>
